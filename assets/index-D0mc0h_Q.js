import{h as C}from"./kaplay-CpR_OpMc.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const u of t.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function e(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(n){if(n.ep)return;n.ep=!0;const t=e(n);fetch(n.href,t)}})();const p=48,x=64,A=4,G=[210,60,60],S=[255,230,0],m=[120,200,255],N=[255,190,80],w=5,U=160,D=420,L=520,f=[{background:[12,22,70],ground:{y:230,height:28,color:[110,80,60]},platforms:[{pos:[240,185],size:[90,16],color:[200,160,80]},{pos:[420,145],size:[110,16],color:[205,175,90]},{pos:[560,115],size:[90,16],color:[210,180,100]}],traps:[{pos:[240,214],size:[60,18]},{pos:[380,214],size:[60,18]}],boostPads:[{pos:[140,214],size:[40,10],force:520},{pos:[320,214],size:[40,10],force:540}]},{background:[22,48,32],ground:{y:250,height:38,color:[70,130,70]},platforms:[{pos:[220,200],size:[110,18],color:[90,160,90]},{pos:[380,165],size:[120,18],color:[110,180,110]},{pos:[540,205],size:[80,18],color:[120,200,120]}],traps:[{pos:[150,234],size:[80,20]},{pos:[310,234],size:[60,20]},{pos:[470,234],size:[80,20]}],boostPads:[{pos:[260,234],size:[36,10],force:560},{pos:[400,234],size:[36,10],force:600}]},{background:[40,18,55],ground:{y:220,height:34,color:[140,70,120]},platforms:[{pos:[170,180],size:[80,16],color:[200,110,170]},{pos:[300,140],size:[100,16],color:[210,130,180]},{pos:[440,120],size:[100,16],color:[215,140,190]},{pos:[580,155],size:[80,16],color:[220,150,200]}],traps:[{pos:[210,204],size:[60,18]},{pos:[330,204],size:[60,18]},{pos:[470,204],size:[80,18]}],boostPads:[{pos:[280,204],size:[36,10],force:600},{pos:[560,204],size:[36,10],force:640}]},{background:[60,18,18],ground:{y:200,height:40,color:[160,70,50]},platforms:[{pos:[210,165],size:[110,18],color:[210,120,80]},{pos:[340,125],size:[100,18],color:[220,130,90]},{pos:[480,115],size:[120,18],color:[230,150,110]},{pos:[600,155],size:[80,18],color:[240,170,130]}],traps:[{pos:[140,184],size:[70,22]},{pos:[280,184],size:[60,22]},{pos:[400,184],size:[60,22]},{pos:[520,184],size:[80,22]}],boostPads:[{pos:[240,184],size:[36,10],force:620},{pos:[360,184],size:[36,10],force:660}]},{background:[18,40,70],ground:{y:215,height:36,color:[90,90,120]},platforms:[{pos:[160,180],size:[90,16],color:[150,170,210]},{pos:[280,140],size:[100,16],color:[160,190,220]},{pos:[420,110],size:[120,16],color:[170,200,230]},{pos:[560,150],size:[100,16],color:[180,210,240]}],traps:[{pos:[180,198],size:[60,18]},{pos:[330,198],size:[60,18]},{pos:[480,198],size:[60,18]}],boostPads:[{pos:[260,198],size:[36,10],force:640},{pos:[410,198],size:[36,10],force:680}]},{background:[72,18,50],ground:{y:205,height:42,color:[180,60,100]},platforms:[{pos:[180,170],size:[100,18],color:[230,120,150]},{pos:[320,130],size:[110,18],color:[240,140,170]},{pos:[460,130],size:[110,18],color:[245,150,190]},{pos:[600,170],size:[100,18],color:[250,160,210]}],traps:[{pos:[130,190],size:[70,20]},{pos:[270,190],size:[70,20]},{pos:[410,190],size:[70,20]},{pos:[550,190],size:[70,20]}],boostPads:[{pos:[220,190],size:[34,10],force:700},{pos:[360,190],size:[34,10],force:720},{pos:[500,190],size:[34,10],force:740}]}];function K(o,s){s.livesText||(s.livesText=o.add([o.pos(16,16),o.anchor("topleft"),o.fixed(),o.text("Lives: "+s.lives,{size:18}),o.color(255,255,255)])),g(s)}function g(o){o.livesText&&(o.livesText.text=`Lives: ${Math.max(o.lives,0)}`)}function M(o,s,e){s.progressText||(s.progressText=o.add([o.pos(o.width()-16,16),o.anchor("topright"),o.fixed(),o.text("",{size:18}),o.color(255,255,255)])),b(s,e)}function b(o,s){o.progressText&&(o.progressText.text=`Stage ${o.currentSection+1} / ${s}`)}function X(o,s,e){function a(P,z={}){const y=o.clamp(P,0,f.length-1);e.currentSection=y,e.hasFinished=!1,e.isRespawning=!1,e.sectionObjects.forEach(r=>r.destroy()),e.sectionObjects=[],e.finishBanner&&(e.finishBanner.destroy(),e.finishBanner=null);const l=f[y],[R,E,I]=l.background;o.setBackground(o.rgb(R,E,I));const j=o.add([o.pos(0,l.ground.y),o.rect(o.width(),l.ground.height),o.color(...l.ground.color),o.area(),o.body({isStatic:!0}),o.anchor("topleft")]);if(e.sectionObjects.push(j),l.platforms?.forEach(r=>{const d=r.color??[170,170,170],O=o.add([o.pos(...r.pos),o.rect(...r.size),o.color(...d),o.area(),o.body({isStatic:!0}),o.anchor("center")]);e.sectionObjects.push(O)}),l.traps?.forEach(r=>{const d=r.color??G,O=o.add(["trap",o.pos(...r.pos),o.rect(...r.size),o.color(...d),o.area(),o.anchor("topleft")]);e.sectionObjects.push(O)}),l.boostPads?.forEach(r=>{const d=o.add(["boost",o.pos(...r.pos),o.rect(...r.size),o.color(...r.color??N),o.area(),o.body({isStatic:!0}),o.anchor("topleft"),{boostForce:r.force??L}]);e.sectionObjects.push(d)}),y===0){const r=o.add([o.pos(p-20,l.ground.y-6),o.rect(80,12),o.color(...S),o.anchor("center")]);e.sectionObjects.push(r);const d=o.add([o.pos(p+20,l.ground.y-50),o.anchor("center"),o.text("START",{size:20}),o.color(...S)]);e.sectionObjects.push(d)}if(y===f.length-1){const r=o.add(["finish",o.pos(o.width()-p,l.ground.y),o.rect(16,l.ground.height+160),o.anchor("botleft"),o.color(...m),o.area()]);e.sectionObjects.push(r);const d=o.add([o.pos(o.width()-p+40,l.ground.y-120),o.anchor("center"),o.text("FINISH",{size:20}),o.color(...m)]);e.sectionObjects.push(d)}K(o,e),M(o,e,f.length);const B=z.entry==="left"?p:z.entry==="right"?o.width()-p:o.clamp(s.pos.x,p,o.width()-p),_=l.ground.y-x;s.pos=o.vec2(B,_),s.vel=o.vec2(0,0),s.gravityScale=1,z.entry==="left"?s.angle=0:z.entry==="right"&&(s.angle=180)}function n(){e.hasFinished||(e.hasFinished=!0,s.vel=o.vec2(0,0),s.pos.x=o.width()-p-24,e.finishBanner=o.add([o.pos(o.width()/2,80),o.anchor("center"),o.text("Level Complete!",{size:28}),o.color(255,255,255)]))}function t(){e.hasFinished=!0,e.isRespawning=!1,s.vel=o.vec2(0,0),s.gravityScale=0,e.finishBanner&&e.finishBanner.destroy(),e.finishBanner=o.add([o.pos(o.width()/2,o.height()/2),o.anchor("center"),o.text("Game Over",{size:32}),o.color(255,80,80)]),g(e),b(e,f.length)}function u(){if(!(e.hasFinished||e.isRespawning)){if(e.isRespawning=!0,e.lives-=1,e.lives<=0){e.lives=0,g(e),t();return}g(e),b(e,f.length),a(0,{entry:"left"})}}function F(){e.lives=w,e.hasFinished=!1,e.isRespawning=!1,e.finishBanner&&(e.finishBanner.destroy(),e.finishBanner=null),g(e),b(e,f.length),a(0,{entry:"left"})}return{loadSection:a,respawnToStart:u,handleFinish:n,handleGameOver:t,resetGame:F}}function $(){return{currentSection:0,sectionObjects:[],hasFinished:!1,finishBanner:null,lives:w,livesText:null,isRespawning:!1,progressText:null}}const i=C();i.loadRoot("./");i.loadSprite("pacman","sprites/pacman.png",{sliceX:4,anims:{chomp:{from:0,to:3,speed:12,loop:!0}}});i.setGravity(1200);const c=i.add([i.pos(120,80),i.sprite("pacman",{anim:"chomp"}),i.anchor("center"),i.area(),i.body()]),h=$(),{loadSection:v,respawnToStart:T,handleFinish:H,resetGame:q}=X(i,c,h);v(h.currentSection);c.onCollide("trap",()=>{T()});c.onCollide("finish",()=>{H()});c.onCollide("boost",o=>{const s=o.boostForce??L;c.jump(s),c.angle=-20});i.onUpdate(()=>{if(h.hasFinished){c.vel.x=0;return}let o=0;if(i.isKeyDown("left")&&(o-=1),i.isKeyDown("right")&&(o+=1),c.vel.x=o*U,o!==0&&(c.angle=o<0?180:0),c.pos.x>i.width()+p){if(h.currentSection<f.length-1){v(h.currentSection+1,{entry:"left"});return}c.pos.x=i.width()-p}else if(c.pos.x<-p){if(h.currentSection>0){v(h.currentSection-1,{entry:"right"});return}c.pos.x=p}c.pos.y>i.height()+x*A&&T()});i.onKeyPress(["up","space"],()=>{c.isGrounded()&&c.jump(D)});i.onKeyPress("r",()=>{q()});
//# sourceMappingURL=index-D0mc0h_Q.js.map
